{% extends 'app/layout.html' %}
{% load staticfiles %}

{% block content %}
<h1>{{ project.name }}</h1>

<p>{{ project.description|linebreaks }}</p>

<div class="row">
    <div class='col-md-6'>
        <h2>Scenarios</h2>
        {% for scenario in project.scenario_set.all %}
        <div class='row'>
            <a class='h4' href="{% url 'scenario' scenario.id %}">{{ scenario.name }}</a>
            <p>{{ scenario.description }}</p>
        </div>
        {% endfor %}
    </div>

    <div class="col-md-6">
        {% if user.is_authenticated %}
        <h4>Create a new scenario</h4>
        <p>Evaluate how well a river meets target criteria using either
        historic USGS data or by uploading your own data.</p>
        <a href="/admin/flowviz/scenario/add?project={{ project.id }}&navsource=main" class="btn btn-primary">Create a scenario &raquo;</a>
        {% endif %}
        <h4>Compare Scenarios</h4>
        <p>Compare all of the scenarios in the project against one another.</p>
        <a href="{% url 'project_compare' project.id %}" class="btn btn-primary">Compare scenarios &raquo;</a>
    </div>
</div>

<div class='row'>
    <h2>Indicators</h2>
    <div class='row'>
        <h3>Environmental Flow Sufficiency</h3>
        <div class='row'>
            <h4>Temporal Deficit</h4>
        </div>
        <div class='row'>
            <h4>Volumetric Deficit</h4>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script type="text/javascript" src="{% static 'flowviz/d3.min.js' %}"></script>
<script type="text/javascript" src="{% static 'flowviz/vega.js' %}"></script>
<script type="text/javascript" src="{% static 'flowviz/cedar.js' %}"></script>
<script type="text/javascript" src="{% static 'flowviz/common.js' %}"></script>
<script type="text/javascript" src="{% static 'flowviz/project_compare.js' %}"></script>
<script type="text/javascript">
    var __tables = {
        "deficit-pct-table": "{% url 'project_deficit_days_csv' project.id %}",
        "deficit-stats-table": "{% url 'project_deficit_stats_csv' project.id %}"
    };

    var imgUrls = {
        percent: "{% url 'project_pct_plot' project.id %}",
        deficit: "{% url 'project_stats_plot' project.id %}"
    }

    $(document).ready(function () {
        ProjectCompare.initialize(__tables, imgUrls);
    });
</script>
{% endblock %}
